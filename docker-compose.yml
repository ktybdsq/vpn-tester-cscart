version: '3.8'

services:
    vpn-tester:
        build: .
        container_name: vpn-tester
        volumes:
            # Конфигурации VLESS
            - ./configs:/app/configs
            # Отчёты
            - ./reports:/app/reports
            # Логи
            - ./logs:/app/logs
        ports:
            - '27200:5000'
        environment:
            - PYTHONUNBUFFERED=1
            - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN:-}
            - TELEGRAM_CHAT_ID=${TELEGRAM_CHAT_ID:-}
            # Разрешаем доступ к хосту
            - EXTRA_HOSTS=host.docker.internal:host-gateway
        extra_hosts:
            - "host.docker.internal:host-gateway"
        restart: unless-stopped
        networks:
            - vpn-tester-net

networks:
    vpn-tester-net:
        driver: bridge
